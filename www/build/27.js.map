{"version":3,"sources":["../../src/pages/recovery-password/recovery-password.module.ts","../../src/pages/recovery-password/recovery-password.ts"],"names":[],"mappings":"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","file":"27.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { RecoveryPasswordPage } from './recovery-password';\n\n@NgModule({\n  declarations: [\n    RecoveryPasswordPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(RecoveryPasswordPage),\n  ],\n})\nexport class RecoveryPasswordPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/recovery-password/recovery-password.module.ts","import { Component } from '@angular/core';\nimport {\n    AlertController,\n    IonicPage,\n    Loading,\n    LoadingController,\n    MenuController,\n    NavController,\n    NavParams\n} from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\n\nimport { AuthProvider } from \"../../providers/auth/auth\";\nimport { UserProvider } from \"../../providers/user/user\";\n\nimport { Constants } from \"../../environments/constants\";\n\n@IonicPage()\n@Component({\n    selector: 'page-recovery-password',\n    templateUrl: 'recovery-password.html',\n})\nexport class RecoveryPasswordPage {\n\n    public recoveryForm: FormGroup;\n    submitAttempt: boolean = false;\n\n    constructor(\n        public navCtrl: NavController,\n        public navParams: NavParams,\n        public menu: MenuController,\n        public alertCtrl: AlertController,\n        public loadingCtrl: LoadingController,\n        public formBuilder: FormBuilder,\n        private authProvider: AuthProvider,\n        private userProvider: UserProvider) {\n\n        const emailRegex = /^[a-z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;\n\n        this.recoveryForm = formBuilder.group({\n            email: ['', Validators.compose([Validators.required, Validators.pattern(emailRegex)])]\n        });\n    }\n\n    ionViewCanEnter() {\n        this.setVisibleMenu(false);\n        this.userProvider.getUserLocal().then(userID => {\n            if (!userID) {\n                return true;\n            }\n        });\n    }\n\n    ionViewDidLoad() {\n    }\n\n    ionViewWillLeave() {\n    }\n\n    recovery() {\n        this.submitAttempt = true;\n\n        if (this.isValidAttributes()) {\n            let loading: Loading = this.showLoading();\n            loading.present();\n\n            this.authProvider.sendPasswordResetEmail(this.recoveryForm.value.email)\n                .then(() => {\n                    loading.dismiss();\n                    this.showAlert('Sucesso!', 'Você receberá um email com instruções para recuperar sua senha.', '', () => {\n                        this.navCtrl.setRoot(Constants.LOGIN_PAGE.name);\n                    });\n\n                }).catch(error => {\n                    loading.dismiss();\n\n                    let errorMessage = 'Não foi possível restaurar sua senha!';\n\n                    if (error['code'] && error['code'] == 'auth/user-not-found') {\n                        errorMessage = 'O usuário não está cadastrado!';\n                    }\n\n                    this.showAlert(\"Erro!\", errorMessage, \"error\", () => {\n                    });\n                });\n\n        } else {\n            const warn = 'Insira um email válido para recuperar sua senha!';\n            this.showAlert(\"Aviso\", warn, \"info\", () => {\n            });\n        }\n    }\n\n    isValidAttributes(): Boolean {\n        return this.recoveryForm.valid;\n    }\n\n    showAlert(title: string, msg: string, type: string, callback) {\n        let alert = this.alertCtrl.create({\n            title: title,\n            message: msg,\n            cssClass: type,\n            buttons: [\n                {\n                    text: 'OK',\n                    cssClass: 'btn-ok',\n                    handler: data => {\n                        callback();\n                    }\n                }\n            ]\n        });\n        alert.present();\n    }\n\n    setVisibleMenu(status = false) {\n        this.menu.enable(status);\n        this.menu.swipeEnable(status);\n    }\n\n    showLogin() {\n        this.navCtrl.setRoot(Constants.LOGIN_PAGE.name);\n    }\n\n    private showLoading(): Loading {\n        return this.loadingCtrl.create({ content: 'Aguarde...' });\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/recovery-password/recovery-password.ts"],"sourceRoot":""}